import{A as D}from"./AdminLayout-CqgXsgIh.js";import{g as l,o as s,a as e,p as A,n as B,c as M,q as N,t as o,f as x,d as Z,s as U,e as g,u as y,b as h,w as m,T as L,F as w,i as p,l as W,h as z,S as C}from"./app-D8qM44oJ.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{f as E}from"./format-DF3zju1I.js";function K(a,d){return s(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M18.375 2.25c-1.035 0-1.875.84-1.875 1.875v15.75c0 1.035.84 1.875 1.875 1.875h.75c1.035 0 1.875-.84 1.875-1.875V4.125c0-1.036-.84-1.875-1.875-1.875h-.75ZM9.75 8.625c0-1.036.84-1.875 1.875-1.875h.75c1.036 0 1.875.84 1.875 1.875v11.25c0 1.035-.84 1.875-1.875 1.875h-.75a1.875 1.875 0 0 1-1.875-1.875V8.625ZM3 13.125c0-1.036.84-1.875 1.875-1.875h.75c1.036 0 1.875.84 1.875 1.875v6.75c0 1.035-.84 1.875-1.875 1.875h-.75A1.875 1.875 0 0 1 3 19.875v-6.75Z"})])}function S(a,d){return s(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z","clip-rule":"evenodd"}),e("path",{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"})])}function T(a,d){return s(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M1.5 8.67v8.58a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V8.67l-8.928 5.493a3 3 0 0 1-3.144 0L1.5 8.67Z"}),e("path",{d:"M22.5 6.908V6.75a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3v.158l9.714 5.978a1.5 1.5 0 0 0 1.572 0L22.5 6.908Z"})])}function V(a,d){return s(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"}),e("path",{"fill-rule":"evenodd",d:"M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 0 1 0-1.113ZM17.25 12a5.25 5.25 0 1 1-10.5 0 5.25 5.25 0 0 1 10.5 0Z","clip-rule":"evenodd"})])}function H(a,d){return s(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M4.5 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0ZM14.25 8.625a3.375 3.375 0 1 1 6.75 0 3.375 3.375 0 0 1-6.75 0ZM1.5 19.125a7.125 7.125 0 0 1 14.25 0v.003l-.001.119a.75.75 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122ZM17.25 19.128l-.001.144a2.25 2.25 0 0 1-.233.96 10.088 10.088 0 0 0 5.06-1.01.75.75 0 0 0 .42-.643 4.875 4.875 0 0 0-6.957-4.611 8.586 8.586 0 0 1 1.71 5.157v.003Z"})])}const O={class:"flex items-center space-x-4"},F={class:"text-lg font-semibold text-gray-800 dark:text-gray-100"},q={class:"text-2xl font-bold text-gray-900 dark:text-white animate-fade-in-up"},b={__name:"SummaryCard",props:{title:String,value:[String,Number],icon:String,color:{type:String,default:"teal"}},setup(a){const d=a,f={DocumentTextIcon:S,ChartBarIcon:K,EnvelopeIcon:T,UsersIcon:H,EyeIcon:V},c=A(()=>f[d.icon]||S);return(n,t)=>(s(),l("div",{class:B(["p-6 transition transform bg-white border rounded-lg shadow hover:shadow-md dark:bg-gray-800 dark:border-gray-700 hover:-translate-y-1",`ring-2 ring-${a.color}-100 dark:ring-${a.color}-800/50`]),tabindex:"0","aria-label":"Statistik {{ title }}"},[e("div",O,[e("div",{class:B(["flex items-center justify-center w-12 h-12 rounded-full",`bg-${a.color}-100 text-${a.color}-600 dark:bg-${a.color}-800 dark:text-${a.color}-200`])},[(s(),M(N(c.value),{class:"w-6 h-6"}))],2),e("div",null,[e("h2",F,o(a.title),1),e("p",q,o(a.value),1)])])],2))}},G={class:"flex flex-col items-center gap-4 p-6 bg-white border border-teal-100 shadow-lg rounded-2xl dark:bg-gray-900 dark:border-teal-900/30"},J={class:"flex items-center w-full gap-3"},P={class:"inline-flex items-center justify-center text-white rounded-full shadow w-14 h-14 bg-gradient-to-br from-teal-400 to-indigo-600","aria-hidden":"true"},Q={class:"flex-1 min-w-0"},X={class:"flex items-end gap-1 text-4xl font-extrabold leading-none text-antasus-black dark:text-white animate-pulse"},Y={class:"flex items-center justify-between w-full mt-2"},ee={class:"flex items-center gap-2"},te=["onClick","onKeydown","aria-current","aria-label"],ae={class:"mr-1 text-xs text-gray-400 select-none dark:text-gray-500"},se={class:"relative w-full mt-1 h-28"},le={key:0,class:"absolute bottom-1 left-2 text-[10px] text-gray-400 dark:text-gray-600"},ne={key:1,class:"absolute bottom-1 right-2 text-[10px] text-gray-400 dark:text-gray-600"},re={__name:"ActiveVisitorsWidget",setup(a){const d=x(null),f=x(null),c=x(0),n=x([]),t=x("1h"),k=[{value:"1h",label:"1h"},{value:"6h",label:"6h"},{value:"24h",label:"24h"}],r=A(()=>t.value==="1h"?"letzte Stunde (2 min)":t.value==="6h"?"letzte 6 Stunden (10 min)":"letzte 24h (60 min)");function _(v){t.value!==v&&(t.value=v)}async function $(){try{const u=await(await fetch(`/admin/active-visitors-history?range=${t.value}`)).json();c.value!==(u.current??0)?(c.value=0,setTimeout(()=>{c.value=u.current??0},100)):c.value=u.current??0,n.value=u.history??[],I()}catch{c.value=0,n.value=[],I()}}function I(){if(!window.Chart||!d.value)return;f.value&&f.value.destroy();const v=d.value.getContext("2d"),u=v.createLinearGradient(0,0,0,120);u.addColorStop(0,"#00fdcf99"),u.addColorStop(.7,"#6366f155"),u.addColorStop(1,"#fff0"),f.value=new window.Chart(v,{type:"line",data:{labels:n.value.map(i=>i.time),datasets:[{label:"Besucher",data:n.value.map(i=>i.count),borderColor:"#00fdcf",backgroundColor:u,pointRadius:2.5,pointHoverRadius:7,tension:.34,fill:!0,borderWidth:2.2,pointBackgroundColor:"#00fdcf"}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{grid:{display:!1},ticks:{autoSkip:!0,maxTicksLimit:9}},y:{beginAtZero:!0,grid:{color:"#e5e7eb22"},ticks:{stepSize:1,precision:0,font:{size:10}}}},plugins:{legend:{display:!1},tooltip:{enabled:!0,backgroundColor:"#18181b",borderColor:"#00fdcf",borderWidth:1.2,bodyColor:"#fff",titleColor:"#00fdcf",padding:10,callbacks:{title:i=>`Zeit: ${i[0].label}`,label:i=>`Besucher: ${i.parsed.y}`},displayColors:!1}},animation:{duration:650,easing:"cubicBezier(.22,1,.36,1)"}}})}return Z(()=>{$(),setInterval($,14e3)}),U(t,$),(v,u)=>(s(),l("div",G,[e("div",J,[e("span",P,[g(y(V),{class:"w-7 h-7"})]),e("div",Q,[u[0]||(u[0]=e("div",{class:"mb-1 text-xs font-semibold text-gray-400 uppercase"},[h(" Aktive Besucher "),e("span",{class:"font-normal text-[10px] text-gray-300 dark:text-gray-600"},"(letzte 10 min)")],-1)),e("div",X,[g(L,{name:"counter",mode:"out-in"},{default:m(()=>[(s(),l("span",{key:c.value,class:"transition-all ease-out duration-400"},o(c.value),1))]),_:1})])])]),e("div",Y,[e("div",ee,[(s(),l(w,null,p(k,i=>e("span",{key:i.value,onClick:j=>_(i.value),tabindex:0,onKeydown:W(j=>_(i.value),["enter"]),class:B(["px-3 py-1 text-xs rounded-lg cursor-pointer font-semibold transition",t.value===i.value?"bg-teal-500 text-white shadow ring-2 ring-teal-400 dark:ring-teal-700":"bg-teal-50 text-teal-700 hover:bg-teal-100 dark:bg-teal-800/60 dark:text-teal-200 dark:hover:bg-teal-800/80"]),"aria-current":t.value===i.value,"aria-label":`Zeitraum: ${i.label}`},o(i.label),43,te)),64))]),e("span",ae,o(r.value),1)]),e("div",se,[e("canvas",{ref_key:"chartRef",ref:d,class:"h-full"},null,512),n.value.length?(s(),l("span",le,o(n.value[0].time),1)):z("",!0),n.value.length?(s(),l("span",ne,o(n.value[n.value.length-1].time),1)):z("",!0)])]))}},oe=R(re,[["__scopeId","data-v-62355ef8"]]),ie={class:"px-4 py-10 mx-auto max-w-7xl space-y-14"},de={class:"flex flex-col gap-6 mb-8 md:flex-row md:items-center md:justify-between"},ce={class:"flex gap-3"},ue={class:"grid gap-8 lg:grid-cols-5 sm:grid-cols-2"},ge={class:"flex flex-col justify-between col-span-2 bg-white border border-teal-100 shadow-lg dark:bg-gray-900 rounded-2xl p-7 dark:border-teal-900/30 animate-fade-in-up"},he={key:0,class:"pb-8 text-base text-gray-400"},fe={key:1,class:"mb-3 divide-y divide-teal-50 dark:divide-teal-900/10"},ve={class:"font-semibold text-gray-800 dark:text-gray-100"},xe={class:"ml-2 text-gray-500"},me={class:"pt-2 text-xs text-gray-500"},be={"aria-labelledby":"online-user-heading",class:"mt-14"},ye={key:0,class:"flex flex-wrap gap-3"},we=["title"],pe={class:"text-gray-400"},ke={key:1,class:"pl-1 text-gray-400"},_e={"aria-labelledby":"loggedin-user-heading",class:"mt-10"},Ce={key:0,class:"space-y-1"},$e={class:"font-medium text-gray-900 dark:text-gray-100"},Be={class:"text-gray-500"},ze={key:1,class:"pl-1 text-gray-400"},Ie={"aria-labelledby":"users-with-role-heading",class:"mt-10"},Se={class:"overflow-auto bg-white border border-gray-100 rounded-lg shadow-lg dark:border-gray-800 dark:bg-gray-900"},Ae={class:"min-w-full text-sm"},Me={class:"px-4 py-2"},Ze={class:"px-4 py-2"},Re={class:"px-4 py-2"},Ve={key:0,class:"mt-2 text-gray-400"},je={__name:"Dashboard",props:{stats:{type:Object,default:()=>({services:0,referenzen:0,messages:0,users:0,newBookings:[],newBookingCount:0,liveVisitors:0})},activeVisitors:Object,onlineUsers:Array,usersWithRoles:Array,loggedInUsers:Array},setup(a){const d=x(0);function f(){fetch("/active-visitors").then(n=>n.json()).then(n=>{d.value=n.count}).catch(()=>{d.value=0})}Z(()=>{f(),setInterval(f,7500)}),x(0);function c(n){return n?E(new Date(n),"dd.MM.yyyy"):"-"}return(n,t)=>(s(),M(D,{title:"Dashboard"},{default:m(()=>{var k;return[e("div",ie,[e("div",de,[t[3]||(t[3]=e("div",null,[e("h1",{class:"mb-2 text-4xl font-extrabold tracking-tight md:text-5xl text-antasus-black dark:text-white"}," Willkommen im Admin-Dashboard "),e("p",{class:"text-base font-medium text-gray-600 dark:text-gray-300"},[h(" Ihre zentrale Steuerzentrale für alle Aktivitäten und Auswertungen bei "),e("span",{class:"font-bold text-teal-600"},"ANTASUS Infra"),h(". ")])],-1)),e("div",ce,[g(y(C),{href:"/admin/services",class:"px-5 py-2 text-sm font-semibold text-white transition bg-teal-600 rounded-lg shadow hover:bg-teal-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-teal-300","aria-label":"Services verwalten"},{default:m(()=>t[0]||(t[0]=[h(" Services verwalten ")])),_:1,__:[0]}),g(y(C),{href:"/admin/referenzen",class:"px-5 py-2 text-sm font-semibold text-white transition bg-indigo-600 rounded-lg shadow hover:bg-indigo-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-indigo-300","aria-label":"Referenzen verwalten"},{default:m(()=>t[1]||(t[1]=[h(" Referenzen verwalten ")])),_:1,__:[1]}),g(y(C),{href:"/admin/messages",class:"px-5 py-2 text-sm font-semibold text-white transition bg-blue-600 rounded-lg shadow hover:bg-blue-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-300","aria-label":"Nachrichten verwalten"},{default:m(()=>t[2]||(t[2]=[h(" Nachrichten ")])),_:1,__:[2]})])]),e("div",ue,[e("div",ge,[t[7]||(t[7]=e("h2",{class:"mb-3 text-lg font-bold text-teal-700 dark:text-teal-400"}," Neue Buchungen ",-1)),(k=a.stats.newBookings)!=null&&k.length?(s(),l("ul",fe,[(s(!0),l(w,null,p(a.stats.newBookings,r=>(s(),l("li",{key:r.id,class:"flex items-center justify-between py-2 group"},[e("span",null,[e("span",ve,o(r.name),1),e("span",xe,"("+o(c(r.start))+")",1)]),g(y(C),{href:n.route("admin.bookings.index"),class:"text-sm font-medium text-teal-600 hover:underline focus:outline-none","aria-label":"Zur Buchungsübersicht"},{default:m(()=>t[4]||(t[4]=[h(" Verwalten ")])),_:1,__:[4]},8,["href"])]))),128))])):(s(),l("div",he," Keine neuen Buchungen ")),e("div",me,[t[5]||(t[5]=h(" Insgesamt ")),e("b",null,o(a.stats.newBookingCount),1),t[6]||(t[6]=h(" neue Buchung(en) "))])]),g(b,{class:"col-span-1",title:"Services",value:a.stats.services,icon:"DocumentTextIcon",color:"teal"},null,8,["value"]),g(b,{class:"col-span-1",title:"Referenzen",value:a.stats.referenzen,icon:"ChartBarIcon",color:"indigo"},null,8,["value"]),g(b,{class:"col-span-1",title:"Nachrichten",value:a.stats.messages,icon:"EnvelopeIcon",color:"blue"},null,8,["value"]),g(b,{class:"col-span-1",title:"Kunden",value:a.stats.users,icon:"UsersIcon",color:"rose"},null,8,["value"]),g(b,{class:"col-span-1",title:"Live-Besucher",value:d.value,icon:"EyeIcon",color:"emerald"},null,8,["value"]),g(oe,{class:"col-span-2"})]),e("section",be,[t[8]||(t[8]=e("h2",{id:"online-user-heading",class:"mb-4 text-2xl font-bold text-gray-800 dark:text-white"}," Online-Benutzer ",-1)),a.onlineUsers&&a.onlineUsers.length?(s(),l("ul",ye,[(s(!0),l(w,null,p(a.onlineUsers,r=>(s(),l("li",{key:r.id,class:"px-3 py-2 text-sm font-medium text-teal-700 shadow rounded-xl bg-teal-50 dark:bg-teal-900/40 dark:text-teal-200",title:r.email},[h(o(r.name)+" ",1),e("span",pe,"("+o(r.email)+")",1)],8,we))),128))])):(s(),l("div",ke," Keine Benutzer online "))]),e("section",_e,[t[9]||(t[9]=e("h2",{id:"loggedin-user-heading",class:"mb-4 text-2xl font-bold text-gray-800 dark:text-white"}," Eingeloggt (ever) ",-1)),a.loggedInUsers&&a.loggedInUsers.length?(s(),l("ul",Ce,[(s(!0),l(w,null,p(a.loggedInUsers,r=>(s(),l("li",{key:r.id},[e("span",$e,o(r.name),1),e("span",Be," — zuletzt eingeloggt am "+o(c(r.last_activity)),1)]))),128))])):(s(),l("div",ze,"Keine Einträge"))]),e("section",Ie,[t[11]||(t[11]=e("h2",{id:"users-with-role-heading",class:"mb-4 text-2xl font-bold text-gray-800 dark:text-white"}," Benutzer mit Rolle ",-1)),e("div",Se,[e("table",Ae,[t[10]||(t[10]=e("thead",{class:"bg-teal-50 dark:bg-teal-950/40"},[e("tr",null,[e("th",{class:"px-4 py-3 font-semibold text-left"}," Name "),e("th",{class:"px-4 py-3 font-semibold text-left"}," E-Mail "),e("th",{class:"px-4 py-3 font-semibold text-left"}," Rollen ")])],-1)),e("tbody",null,[(s(!0),l(w,null,p(a.usersWithRoles,r=>(s(),l("tr",{key:r.id,class:"transition hover:bg-gray-50 dark:hover:bg-gray-800"},[e("td",Me,o(r.name),1),e("td",Ze,o(r.email),1),e("td",Re,o(r.roles.map(_=>_.name).join(", ")),1)]))),128))])])]),!a.usersWithRoles||!a.usersWithRoles.length?(s(),l("div",Ve," Keine Benutzer mit Rolle ")):z("",!0)])])]}),_:1}))}},We=R(je,[["__scopeId","data-v-6a6969f3"]]);export{We as default};
