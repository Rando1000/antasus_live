import{g as d,h as w,o as n,F as h,i as v,c as k,w as _,a as e,n as b,u as z,S as T,j as D,e as $,b as A,k as u,l as H,v as g,m,t as i,W as y}from"./app-DBSLPM7a.js";import{A as N}from"./AdminLayout-DKuz79V1.js";import{f}from"./format-DF3zju1I.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const U={key:0,class:"flex items-center justify-center mt-6 space-x-2 text-sm"},L=["innerHTML"],j=["innerHTML"],F={__name:"Pagination",props:{links:Array},setup(l){return(p,s)=>l.links.length>3?(n(),d("div",U,[(n(!0),d(h,null,v(l.links,(r,c)=>(n(),d(h,{key:c},[r.url?(n(),k(z(T),{key:1,href:r.url,class:b(["px-3 py-1 border rounded transition",r.active?"bg-teal-600 text-white border-teal-600":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"])},{default:_(()=>[e("span",{innerHTML:r.label},null,8,j)]),_:2},1032,["href","class"])):(n(),d("span",{key:0,innerHTML:r.label,class:"px-3 py-1 text-gray-400 border rounded"},null,8,L))],64))),128))])):w("",!0)}},E={class:"p-6 space-y-8"},K={class:"sticky top-0 z-20 flex flex-wrap items-center gap-4 p-4 mb-4 bg-white border rounded-lg shadow-sm dark:bg-gray-900 dark:border-gray-800"},O={class:"overflow-x-auto bg-white shadow rounded-xl dark:bg-gray-900"},P={class:"min-w-full text-sm divide-y divide-gray-200 dark:divide-gray-700"},W={class:"divide-y divide-gray-100 dark:divide-gray-800"},I={class:"px-4 py-2 whitespace-nowrap"},R={class:"px-4 py-2 whitespace-nowrap"},Z={class:"px-4 py-2 capitalize whitespace-nowrap"},q={class:"px-4 py-2 capitalize whitespace-nowrap"},G={class:"px-4 py-2 whitespace-nowrap"},J={class:"px-4 py-2 whitespace-nowrap"},Q=["href"],X={class:"px-4 py-2 whitespace-nowrap"},Y={class:"px-4 py-2 whitespace-nowrap"},ee=["onUpdate:modelValue","onChange"],te={class:"px-4 py-2 whitespace-nowrap"},ae=["onClick"],se={key:0,class:"p-8 text-center text-gray-400 dark:text-gray-500"},ie={__name:"Index",props:{bookings:Object,filters:Object},setup(l){const p=l,s=D({search:p.filters.search||"",status:p.filters.status||"",from:p.filters.from||"",to:p.filters.to||"",mode:p.filters.mode||""});function r(){y.get(route("admin.bookings.index"),s,{preserveScroll:!0,replace:!0})}function c(){s.search="",s.status="",s.from="",s.to="",s.mode="",r()}function C(o){return f(new Date(o),"dd.MM.yyyy")}function M(o,a){return f(new Date(o),"HH:mm")+" – "+f(new Date(a),"HH:mm")}function S(o){y.put(`/admin/bookings/${o.id}/status`,{status:o.status},{preserveScroll:!0})}function V(o){confirm("Buchung wirklich löschen?")&&y.delete(`/admin/bookings/${o}`,{preserveScroll:!0})}function B(){window.open(route("admin.bookings.export"),"_blank")}return(o,a)=>(n(),k(N,null,{default:_(()=>[e("div",E,[e("div",{class:"flex flex-col gap-6 md:flex-row md:items-center md:justify-between"},[a[6]||(a[6]=e("h1",{class:"text-3xl font-extrabold text-gray-900 dark:text-white"}," Terminbuchungen ",-1)),e("button",{class:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white rounded-lg shadow bg-gradient-to-r from-teal-500 to-indigo-800 hover:from-teal-600 hover:to-indigo-900 focus:outline-none focus-visible:ring-2 focus-visible:ring-teal-400",onClick:B,"aria-label":"Alle Buchungen als CSV exportieren"},a[5]||(a[5]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 17v2a2 2 0 002 2h12a2 2 0 002-2v-2M7 9l5 5 5-5M12 4v10"})],-1),A(" Export CSV ")]))]),e("div",K,[u(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=t=>s.search=t),placeholder:"Suche nach Name/E-Mail",class:"px-3 py-2 text-sm border rounded w-60 focus:ring-2 focus:ring-teal-400 dark:bg-gray-800 dark:text-white",onKeydown:H(r,["enter"]),"aria-label":"Suche"},null,544),[[g,s.search]]),u(e("select",{"onUpdate:modelValue":a[1]||(a[1]=t=>s.status=t),onChange:r,class:"px-3 py-2 text-sm border rounded dark:bg-gray-800 dark:text-white","aria-label":"Status"},a[7]||(a[7]=[e("option",{value:""},"Alle Status",-1),e("option",{value:"neu"},"Neu",-1),e("option",{value:"bearbeitet"},"Bearbeitet",-1),e("option",{value:"abgesagt"},"Abgesagt",-1)]),544),[[m,s.status]]),u(e("input",{type:"date","onUpdate:modelValue":a[2]||(a[2]=t=>s.from=t),class:"px-3 py-2 text-sm border rounded dark:bg-gray-800 dark:text-white",onChange:r,"aria-label":"Von (Datum)"},null,544),[[g,s.from]]),u(e("input",{type:"date","onUpdate:modelValue":a[3]||(a[3]=t=>s.to=t),class:"px-3 py-2 text-sm border rounded dark:bg-gray-800 dark:text-white",onChange:r,"aria-label":"Bis (Datum)"},null,544),[[g,s.to]]),u(e("select",{"onUpdate:modelValue":a[4]||(a[4]=t=>s.mode=t),onChange:r,class:"px-3 py-2 text-sm border rounded dark:bg-gray-800 dark:text-white","aria-label":"Meeting-Modus"},a[8]||(a[8]=[e("option",{value:""},"Alle Modi",-1),e("option",{value:"online"},"Online",-1),e("option",{value:"praesenz"},"Präsenz",-1)]),544),[[m,s.mode]]),e("button",{onClick:c,class:"px-3 py-2 text-xs font-semibold text-gray-500 bg-gray-100 border rounded hover:text-teal-700 dark:bg-gray-800 dark:text-gray-300","aria-label":"Filter zurücksetzen"}," Zurücksetzen ")]),e("div",O,[e("table",P,[a[10]||(a[10]=e("thead",{class:"bg-gray-50 dark:bg-gray-800"},[e("tr",null,[e("th",{class:"px-4 py-3 font-semibold text-left text-gray-600 uppercase"}," Datum "),e("th",{class:"px-4 py-3 font-semibold text-left text-gray-600 uppercase"}," Uhrzeit "),e("th",{class:"px-4 py-3 font-semibold text-left text-gray-600 uppercase"}," Typ "),e("th",{class:"px-4 py-3 font-semibold text-left text-gray-600 uppercase"}," Modus "),e("th",{class:"px-4 py-3 font-semibold text-left text-gray-600 uppercase"}," Name "),e("th",{class:"px-4 py-3 font-semibold text-left text-gray-600 uppercase"}," E-Mail "),e("th",{class:"px-4 py-3 font-semibold text-left text-gray-600 uppercase"}," Thema "),e("th",{class:"px-4 py-3 font-semibold text-left text-gray-600 uppercase"}," Status "),e("th",{class:"px-4 py-3 font-semibold text-left text-gray-600 uppercase"})])],-1)),e("tbody",W,[(n(!0),d(h,null,v(l.bookings.data,t=>(n(),d("tr",{key:t.id,class:"transition hover:bg-teal-50 dark:hover:bg-gray-800"},[e("td",I,i(C(t.start)),1),e("td",R,i(M(t.start,t.end)),1),e("td",Z,i(t.type),1),e("td",q,[e("span",{class:b([t.mode==="online"?"bg-indigo-100 text-indigo-700":"bg-teal-100 text-teal-800","px-2 py-1 rounded"])},i(t.mode??"–"),3)]),e("td",G,i(t.name),1),e("td",J,[e("a",{href:`mailto:${t.email}`,class:"text-teal-700 hover:underline dark:text-teal-300"},i(t.email),9,Q)]),e("td",X,i(t.topic??"–"),1),e("td",Y,[u(e("select",{"onUpdate:modelValue":x=>t.status=x,onChange:x=>S(t),class:b(["px-2 py-1 text-sm font-semibold border rounded focus:outline-none focus:ring-2 focus:ring-teal-400 dark:bg-gray-800",{"bg-green-100 text-green-800":t.status==="bearbeitet","bg-red-100 text-red-700":t.status==="abgesagt","bg-yellow-100 text-yellow-700":t.status==="neu"}]),"aria-label":"Status"},a[9]||(a[9]=[e("option",{value:"neu"},"Neu",-1),e("option",{value:"bearbeitet"}," Bearbeitet ",-1),e("option",{value:"abgesagt"},"Abgesagt",-1)]),42,ee),[[m,t.status]])]),e("td",te,[e("button",{onClick:x=>V(t.id),class:"px-2 py-1 text-xs font-semibold text-red-700 rounded bg-red-50 hover:bg-red-100","aria-label":"Buchung löschen"}," Löschen ",8,ae)])]))),128))])]),l.bookings.data.length===0?(n(),d("div",se," Keine Buchungen gefunden. ")):w("",!0)]),$(F,{links:l.bookings.links},null,8,["links"])])]),_:1}))}};export{ie as default};
