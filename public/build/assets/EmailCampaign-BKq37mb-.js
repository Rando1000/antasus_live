import{j,f as y,s as w,g as o,o as r,a as t,h as i,k as p,b as f,v as c,t as b,m as h,F as T,i as E,y as V,z as B,A as L}from"./app-DBSLPM7a.js";const U={class:"max-w-2xl py-10 mx-auto"},q={key:0,class:"block mt-1 text-xs text-red-600"},A=["value"],C={key:0,class:"block mt-1 text-xs text-red-600"},H={key:0,class:"block mt-1 text-xs text-red-600"},N={key:0,class:"block mt-1 text-xs text-red-600"},S={key:0,class:"mt-6"},F=["innerHTML"],z={class:"flex flex-wrap items-center gap-4 mt-6"},D=["disabled"],I={key:0},O={key:1},W={key:0,class:"font-medium text-green-600"},G={__name:"EmailCampaign",props:{templates:Array,fullTemplates:Object,flash:Object},setup(x){var g,_;const d=x,e=j({to_email:"",to_name:"",template_key:"",subject:"",body:""}),a=y({}),u=y(!1),m=y(!1);(g=d.flash)!=null&&g.success&&(u.value=!0),(_=d.flash)!=null&&_.errors&&(a.value=d.flash.errors),w(()=>e.template_key,n=>{n&&v()}),w(()=>e.to_name,n=>{e.template_key&&d.fullTemplates[e.template_key]&&(e.body=d.fullTemplates[e.template_key].body.replaceAll("{{ recipient_name }}",n||""))});function v(){if(!e.template_key){e.subject="",e.body="";return}const n=d.fullTemplates[e.template_key];e.subject=n.subject,e.body=n.body.replaceAll("{{ recipient_name }}",e.to_name||"")}function k(){e.to_email="",e.to_name="",e.template_key="",e.subject="",e.body="",a.value={},u.value=!1}function M(){m.value=!0,B.Inertia.post(route("admin.emailcampaign.send"),e,{onError(n){a.value=n.props.flash.errors||{},m.value=!1,u.value=!1},onSuccess(){a.value={},u.value=!0,m.value=!1,L(k)}})}return(n,l)=>(r(),o("div",U,[l[12]||(l[12]=t("h1",{class:"mb-6 text-3xl font-extrabold text-gray-900 dark:text-white"}," Werbe-Mail versenden ",-1)),t("form",{onSubmit:V(M,["prevent"]),class:"space-y-6"},[t("div",null,[l[5]||(l[5]=t("label",{for:"to_email",class:"block mb-1 font-semibold"},[f(" Empfänger-E-Mail "),t("span",{class:"text-red-500"},"*")],-1)),p(t("input",{"onUpdate:modelValue":l[0]||(l[0]=s=>e.to_email=s),type:"email",id:"to_email",autocomplete:"email",required:"",class:"w-full px-4 py-2 border rounded focus:ring-2 focus:ring-teal-400",placeholder:"beispiel@firma.de"},null,512),[[c,e.to_email]]),a.value.to_email?(r(),o("span",q,b(a.value.to_email),1)):i("",!0)]),t("div",null,[l[6]||(l[6]=t("label",{for:"to_name",class:"block mb-1 font-semibold"}," Empfänger-Name ",-1)),p(t("input",{"onUpdate:modelValue":l[1]||(l[1]=s=>e.to_name=s),type:"text",id:"to_name",autocomplete:"name",class:"w-full px-4 py-2 border rounded focus:ring-2 focus:ring-teal-400",placeholder:"Max Mustermann"},null,512),[[c,e.to_name]])]),t("div",null,[l[8]||(l[8]=t("label",{for:"template_key",class:"block mb-1 font-semibold"},[f(" Vorlage "),t("span",{class:"text-red-500"},"*")],-1)),p(t("select",{"onUpdate:modelValue":l[2]||(l[2]=s=>e.template_key=s),id:"template_key",onChange:v,required:"",class:"w-full px-4 py-2 border rounded focus:ring-2 focus:ring-teal-400"},[l[7]||(l[7]=t("option",{value:""},"– Bitte wählen –",-1)),(r(!0),o(T,null,E(x.templates,s=>(r(),o("option",{key:s.key,value:s.key},b(s.label),9,A))),128))],544),[[h,e.template_key]]),a.value.template_key?(r(),o("span",C,b(a.value.template_key),1)):i("",!0)]),t("div",null,[l[9]||(l[9]=t("label",{for:"subject",class:"block mb-1 font-semibold"},[f(" Betreff "),t("span",{class:"text-red-500"},"*")],-1)),p(t("input",{"onUpdate:modelValue":l[3]||(l[3]=s=>e.subject=s),type:"text",id:"subject",required:"",class:"w-full px-4 py-2 border rounded focus:ring-2 focus:ring-teal-400",placeholder:"Betreff der E-Mail"},null,512),[[c,e.subject]]),a.value.subject?(r(),o("span",H,b(a.value.subject),1)):i("",!0)]),t("div",null,[l[10]||(l[10]=t("label",{for:"body",class:"block mb-1 font-semibold"},[f(" E-Mail-Text (HTML) "),t("span",{class:"text-red-500"},"*")],-1)),p(t("textarea",{"onUpdate:modelValue":l[4]||(l[4]=s=>e.body=s),id:"body",rows:"9",required:"",class:"w-full px-4 py-2 font-mono border rounded focus:ring-2 focus:ring-teal-400",placeholder:"E-Mail-Inhalt mit HTML"},null,512),[[c,e.body]]),a.value.body?(r(),o("span",N,b(a.value.body),1)):i("",!0)]),e.body?(r(),o("div",S,[l[11]||(l[11]=t("div",{class:"mb-1 font-semibold text-gray-700 dark:text-gray-300"}," Live-Vorschau ",-1)),t("div",{class:"p-4 prose-sm prose border rounded bg-gray-50 dark:bg-gray-800 max-w-none dark:prose-invert",innerHTML:e.body},null,8,F)])):i("",!0),t("div",z,[t("button",{type:"submit",class:"py-2 font-semibold text-white transition rounded shadow px-7 bg-gradient-to-r from-teal-500 to-indigo-700 hover:scale-105",disabled:m.value},[m.value?(r(),o("span",I,"Wird gesendet…")):(r(),o("span",O,"E-Mail versenden"))],8,D),t("button",{type:"button",onClick:k,class:"px-6 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded hover:bg-gray-200 dark:bg-gray-800 dark:hover:bg-gray-700 dark:text-gray-200"}," Zurücksetzen "),u.value?(r(),o("span",W," E-Mail erfolgreich gesendet! ")):i("",!0)])],32)]))}};export{G as default};
