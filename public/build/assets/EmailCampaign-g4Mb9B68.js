import{j as k,e as v,f as a,o as n,a as t,t as r,k as d,g as m,v as b,m as g,F as j,h as M,q as w,s as E}from"./app-eVws0Xuo.js";const V={class:"max-w-2xl py-10 mx-auto"},T=["textContent"],h={class:"mb-4"},B={key:0,class:"text-sm text-red-600"},C={class:"mb-4"},S={class:"mb-4"},U=["value"],N={key:0,class:"text-sm text-red-600"},O={class:"mb-4"},D={key:0,class:"text-sm text-red-600"},F={class:"mb-6"},L={key:0,class:"text-sm text-red-600"},q={class:"flex items-center space-x-4"},A={key:0,class:"text-green-600"},I={__name:"EmailCampaign",props:{templates:Array,fullTemplates:Object,flash:Object},setup(f){var y,c;const u=f,s=k({to_email:"",to_name:"",template_key:"",subject:"",body:""}),o=v({}),p=v(!1);(y=u.flash)!=null&&y.success&&(p.value=!0),(c=u.flash)!=null&&c.errors&&(o.value=u.flash.errors);function x(){if(!s.template_key){s.subject="",s.body="";return}const i=u.fullTemplates[s.template_key];s.subject=i.subject,s.body=i.body.replace("{{ recipient_name }}",s.to_name||"")}function _(){E.Inertia.post(route("admin.emailcampaign.send"),s,{onError(i){o.value=i.props.flash.errors||{},p.value=!1},onSuccess(){o.value={},p.value=!0}})}return(i,e)=>(n(),a("div",V,[t("div",{id:"js-email-templates-json",style:{display:"none"},textContent:r(JSON.stringify(f.fullTemplates))},null,8,T),e[12]||(e[12]=t("h1",{class:"mb-6 text-2xl font-bold"},"Werbe-Mail versenden",-1)),t("form",{onSubmit:w(_,["prevent"])},[t("div",h,[e[5]||(e[5]=t("label",{class:"block mb-1 font-semibold",for:"to_email"},"Empfänger-E-Mail",-1)),d(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>s.to_email=l),type:"email",id:"to_email",class:"w-full px-3 py-2 border rounded",placeholder:"beispiel@firma.de"},null,512),[[b,s.to_email]]),o.value.to_email?(n(),a("span",B,r(o.value.to_email),1)):m("",!0)]),t("div",C,[e[6]||(e[6]=t("label",{class:"block mb-1 font-semibold",for:"to_name"},"Empfänger-Name (optional)",-1)),d(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>s.to_name=l),type:"text",id:"to_name",class:"w-full px-3 py-2 border rounded",placeholder:"Max Mustermann"},null,512),[[b,s.to_name]])]),t("div",S,[e[8]||(e[8]=t("label",{for:"template_key",class:"block mb-1 font-semibold"},"Vorlage",-1)),d(t("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>s.template_key=l),id:"template_key",onChange:x,class:"w-full px-3 py-2 border rounded"},[e[7]||(e[7]=t("option",{value:""},"– bitte wählen –",-1)),(n(!0),a(j,null,M(f.templates,l=>(n(),a("option",{key:l.key,value:l.key},r(l.label),9,U))),128))],544),[[g,s.template_key]]),o.value.template_key?(n(),a("span",N,r(o.value.template_key),1)):m("",!0)]),t("div",O,[e[9]||(e[9]=t("label",{class:"block mb-1 font-semibold",for:"subject"},"Betreff",-1)),d(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>s.subject=l),type:"text",id:"subject",class:"w-full px-3 py-2 border rounded",placeholder:"Betreff der E-Mail"},null,512),[[b,s.subject]]),o.value.subject?(n(),a("span",D,r(o.value.subject),1)):m("",!0)]),t("div",F,[e[10]||(e[10]=t("label",{class:"block mb-1 font-semibold",for:"body"},"E-Mail-Text (HTML)",-1)),d(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=l=>s.body=l),id:"body",class:"w-full px-3 py-2 border rounded",rows:"10"},null,512),[[b,s.body]]),o.value.body?(n(),a("span",L,r(o.value.body),1)):m("",!0)]),t("div",q,[e[11]||(e[11]=t("button",{type:"submit",class:"px-6 py-2 text-white transition bg-teal-600 rounded hover:bg-teal-700"}," E-Mail versenden ",-1)),p.value?(n(),a("span",A,"E-Mail erfolgreich gesendet!")):m("",!0)])],32)]))}};export{I as default};
